/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.4.20
 * 编译日期：2023-01-08 20:59:34
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2022-06-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';var _0x410271=_0x2a6f;(function(_0x48a508,_0x3adb4f){var _0x118552={_0x1e6a68:0xdd,_0x3b3236:0x106,_0x2a899c:0x115,_0x126e3c:0x122,_0x554914:0xd3},_0x221f47=_0x2a6f,_0x1a829c=_0x48a508();while(!![]){try{var _0x578ad2=-parseInt(_0x221f47(0x100))/0x1+parseInt(_0x221f47(0xd5))/0x2+parseInt(_0x221f47(_0x118552._0x1e6a68))/0x3*(parseInt(_0x221f47(_0x118552._0x3b3236))/0x4)+parseInt(_0x221f47(_0x118552._0x2a899c))/0x5+-parseInt(_0x221f47(0xfe))/0x6*(parseInt(_0x221f47(0x130))/0x7)+-parseInt(_0x221f47(0x109))/0x8*(parseInt(_0x221f47(0x12f))/0x9)+-parseInt(_0x221f47(_0x118552._0x126e3c))/0xa*(parseInt(_0x221f47(_0x118552._0x554914))/0xb);if(_0x578ad2===_0x3adb4f)break;else _0x1a829c['push'](_0x1a829c['shift']());}catch(_0x5b7f6e){_0x1a829c['push'](_0x1a829c['shift']());}}}(_0x2249,0x689b9));function _interopNamespace(_0xd8fc3f){var _0x46d139={_0x197d4b:0x135},_0x48c03e=_0x2a6f;if(_0xd8fc3f&&_0xd8fc3f[_0x48c03e(0x11a)])return _0xd8fc3f;var _0x393c43=Object['create'](null);return _0xd8fc3f&&Object[_0x48c03e(_0x46d139._0x197d4b)](_0xd8fc3f)['forEach'](function(_0x562d0c){var _0x3ea34a=_0x48c03e;if(_0x562d0c!=='default'){var _0x3571b1=Object['getOwnPropertyDescriptor'](_0xd8fc3f,_0x562d0c);Object['defineProperty'](_0x393c43,_0x562d0c,_0x3571b1[_0x3ea34a(0x108)]?_0x3571b1:{'enumerable':!![],'get':function(){return _0xd8fc3f[_0x562d0c];}});}}),_0x393c43['default']=_0xd8fc3f,_0x393c43;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function ownKeys(_0x3ee366,_0x415463){var _0xca64e7={_0x22785a:0xdc},_0x571487=_0x2a6f,_0xb99253=Object['keys'](_0x3ee366);if(Object['getOwnPropertySymbols']){var _0x4f8580=Object['getOwnPropertySymbols'](_0x3ee366);_0x415463&&(_0x4f8580=_0x4f8580['filter'](function(_0x53c1b8){return Object['getOwnPropertyDescriptor'](_0x3ee366,_0x53c1b8)['enumerable'];})),_0xb99253[_0x571487(_0xca64e7._0x22785a)]['apply'](_0xb99253,_0x4f8580);}return _0xb99253;}function _objectSpread2(_0x19838d){var _0x134b74=_0x2a6f;for(var _0x12522d=0x1;_0x12522d<arguments['length'];_0x12522d++){var _0x3bfb3c=null!=arguments[_0x12522d]?arguments[_0x12522d]:{};_0x12522d%0x2?ownKeys(Object(_0x3bfb3c),!0x0)[_0x134b74(0xed)](function(_0x3dc0ca){_defineProperty(_0x19838d,_0x3dc0ca,_0x3bfb3c[_0x3dc0ca]);}):Object['getOwnPropertyDescriptors']?Object['defineProperties'](_0x19838d,Object[_0x134b74(0xfa)](_0x3bfb3c)):ownKeys(Object(_0x3bfb3c))['forEach'](function(_0x242f23){Object['defineProperty'](_0x19838d,_0x242f23,Object['getOwnPropertyDescriptor'](_0x3bfb3c,_0x242f23));});}return _0x19838d;}function _0x2a6f(_0x1932f3,_0x2d0e72){var _0x2249c6=_0x2249();return _0x2a6f=function(_0x2a6f8a,_0x22ebe5){_0x2a6f8a=_0x2a6f8a-0xd1;var _0x450d79=_0x2249c6[_0x2a6f8a];return _0x450d79;},_0x2a6f(_0x1932f3,_0x2d0e72);}function _classCallCheck(_0x13e305,_0x47967c){if(!(_0x13e305 instanceof _0x47967c))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}function _defineProperties(_0x512704,_0x53a87e){var _0x21dc29={_0x3a29f0:0xf6,_0x47ba8f:0xf3},_0x7af552=_0x2a6f;for(var _0x5b3cd9=0x0;_0x5b3cd9<_0x53a87e[_0x7af552(_0x21dc29._0x3a29f0)];_0x5b3cd9++){var _0x27515d=_0x53a87e[_0x5b3cd9];_0x27515d['enumerable']=_0x27515d['enumerable']||![],_0x27515d[_0x7af552(_0x21dc29._0x47ba8f)]=!![];if('value'in _0x27515d)_0x27515d['writable']=!![];Object[_0x7af552(0x105)](_0x512704,_0x27515d['key'],_0x27515d);}}function _createClass(_0x437927,_0x324729,_0x3b6cd5){var _0x4f91f6={_0xc715fb:0x10a},_0x1e6be8=_0x2a6f;if(_0x324729)_defineProperties(_0x437927[_0x1e6be8(_0x4f91f6._0xc715fb)],_0x324729);if(_0x3b6cd5)_defineProperties(_0x437927,_0x3b6cd5);return Object['defineProperty'](_0x437927,'prototype',{'writable':![]}),_0x437927;}function _defineProperty(_0x44e970,_0x275e6b,_0x2533a2){return _0x275e6b in _0x44e970?Object['defineProperty'](_0x44e970,_0x275e6b,{'value':_0x2533a2,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x44e970[_0x275e6b]=_0x2533a2,_0x44e970;}function _inherits(_0x1254f4,_0x23dee6){var _0x3ba9cf={_0x22e440:0x127,_0x2a8266:0x105},_0xf46287=_0x2a6f;if(typeof _0x23dee6!=='function'&&_0x23dee6!==null)throw new TypeError('Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function');_0x1254f4['prototype']=Object[_0xf46287(_0x3ba9cf._0x22e440)](_0x23dee6&&_0x23dee6['prototype'],{'constructor':{'value':_0x1254f4,'writable':!![],'configurable':!![]}}),Object[_0xf46287(_0x3ba9cf._0x2a8266)](_0x1254f4,'prototype',{'writable':![]});if(_0x23dee6)_setPrototypeOf(_0x1254f4,_0x23dee6);}function _getPrototypeOf(_0x56ab69){var _0x10a03d={_0x5eaa4b:0xee},_0x5a65c8=_0x2a6f;return _getPrototypeOf=Object[_0x5a65c8(_0x10a03d._0x5eaa4b)]?Object['getPrototypeOf'][_0x5a65c8(0xd6)]():function _0x309620(_0x1b9e67){return _0x1b9e67['__proto__']||Object['getPrototypeOf'](_0x1b9e67);},_getPrototypeOf(_0x56ab69);}function _setPrototypeOf(_0x476d78,_0x3e1d3b){return _setPrototypeOf=Object['setPrototypeOf']?Object['setPrototypeOf']['bind']():function _0x264d0b(_0x20a042,_0xb516c6){return _0x20a042['__proto__']=_0xb516c6,_0x20a042;},_setPrototypeOf(_0x476d78,_0x3e1d3b);}function _isNativeReflectConstruct(){var _0x4d0a58={_0x54879d:0x137,_0x3425e4:0x136},_0x340bca=_0x2a6f;if(typeof Reflect==='undefined'||!Reflect[_0x340bca(0x136)])return![];if(Reflect['construct']['sham'])return![];if(typeof Proxy==='function')return!![];try{return Boolean['prototype'][_0x340bca(_0x4d0a58._0x54879d)]['call'](Reflect[_0x340bca(_0x4d0a58._0x3425e4)](Boolean,[],function(){})),!![];}catch(_0x120a59){return![];}}function _assertThisInitialized(_0x24034c){if(_0x24034c===void 0x0)throw new ReferenceError('this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called');return _0x24034c;}function _possibleConstructorReturn(_0x162eb1,_0x2c77b9){var _0x1674b7=_0x2a6f;if(_0x2c77b9&&(typeof _0x2c77b9===_0x1674b7(0x11d)||typeof _0x2c77b9===_0x1674b7(0x104)))return _0x2c77b9;else{if(_0x2c77b9!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x162eb1);}function _createSuper(_0x15ef26){var _0x4ecb9d=_isNativeReflectConstruct();return function _0x482538(){var _0x5285ac=_0x2a6f,_0x329c46=_getPrototypeOf(_0x15ef26),_0x40b332;if(_0x4ecb9d){var _0x14dbdd=_getPrototypeOf(this)['constructor'];_0x40b332=Reflect[_0x5285ac(0x136)](_0x329c46,arguments,_0x14dbdd);}else _0x40b332=_0x329c46['apply'](this,arguments);return _possibleConstructorReturn(this,_0x40b332);};}function _superPropBase(_0x16c93f,_0x1ada8a){var _0xac4b66={_0x2a40be:0x10a},_0x5cca27=_0x2a6f;while(!Object[_0x5cca27(_0xac4b66._0x2a40be)]['hasOwnProperty']['call'](_0x16c93f,_0x1ada8a)){_0x16c93f=_getPrototypeOf(_0x16c93f);if(_0x16c93f===null)break;}return _0x16c93f;}function _get(){return typeof Reflect!=='undefined'&&Reflect['get']?_get=Reflect['get']['bind']():_get=function _0x3f3e09(_0x362eb5,_0x241c55,_0x7cff2b){var _0x4c7b84=_0x2a6f,_0x3e0b74=_superPropBase(_0x362eb5,_0x241c55);if(!_0x3e0b74)return;var _0x363faa=Object['getOwnPropertyDescriptor'](_0x3e0b74,_0x241c55);if(_0x363faa['get'])return _0x363faa['get'][_0x4c7b84(0xeb)](arguments['length']<0x3?_0x362eb5:_0x7cff2b);return _0x363faa['value'];},_get['apply'](this,arguments);}var Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x410271(0x101)]:Function,MapVRenderer=function(_0x326f2d){var _0x382dde={_0x37a100:0x131},_0x238e7e={_0x545399:0x111,_0x49a5c6:0xfb,_0x48b1fb:0xf9,_0x31812d:0x120},_0x1f69b6={_0x17df81:0xf0,_0xb2eda4:0x12e},_0x1e1efd={_0x3f2c62:0x108,_0x2b086c:0x10a},_0x363afe={_0x5a7de7:0x103,_0x3a31cb:0xda,_0x39359a:0xe4,_0x204d7a:0xde,_0x35e14d:0x118},_0x4bdef6={_0x2e09d6:0xea},_0x4895b0={_0x4a6517:0xfd},_0x254f57={_0x2c537a:0x120},_0x2231f7={_0x1716a3:0xe4,_0x224f08:0x113,_0x396142:0x120,_0x4e26f8:0x110},_0x45b9d1={_0x6454a:0xeb,_0x24671a:0xdf},_0x552f9a=_0x410271;_inherits(_0x41f7c4,_0x326f2d);var _0x2f7ac1=_createSuper(_0x41f7c4);function _0x41f7c4(_0x12a9b9,_0x531669,_0x34719d,_0x2c9953){var _0x4b5ae6=_0x2a6f,_0x4cd0c6;_classCallCheck(this,_0x41f7c4),_0x4cd0c6=_0x2f7ac1[_0x4b5ae6(_0x45b9d1._0x6454a)](this,_0x12a9b9,_0x531669,_0x34719d);if(!BaseLayer$1)return _possibleConstructorReturn(_0x4cd0c6);return _0x4cd0c6['map']=_0x12a9b9,_0x4cd0c6['scene']=_0x12a9b9['scene'],_0x4cd0c6['dataSet']=_0x531669,_0x34719d=_0x34719d||{},_0x4cd0c6[_0x4b5ae6(0x10f)](_0x34719d),_0x4cd0c6['argCheck'](_0x34719d),_0x4cd0c6[_0x4b5ae6(0xf1)](),_0x4cd0c6['canvasLayer']=_0x2c9953,_0x4cd0c6[_0x4b5ae6(_0x45b9d1._0x24671a)]=!0x1,_0x4cd0c6['animation']=_0x34719d['animation'],_0x4cd0c6;}return _createClass(_0x41f7c4,[{'key':'initDevicePixelRatio','value':function _0x198771(){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}},{'key':_0x552f9a(0x12d),'value':function _0x2d6aa0(){}},{'key':_0x552f9a(_0x382dde._0x37a100),'value':function _0x7f85cf(){var _0x56e631=_0x552f9a,_0x3f15a3=this[_0x56e631(_0x2231f7._0x1716a3)][_0x56e631(_0x2231f7._0x224f08)];this['isEnabledTime']()&&this[_0x56e631(_0x2231f7._0x396142)]&&(this['steps'][_0x56e631(_0x2231f7._0x4e26f8)]=_0x3f15a3[_0x56e631(0xe2)][_0x56e631(0x121)]);}},{'key':'animatorMoveendEvent','value':function _0x3a7eb8(){var _0x2d22f8=_0x552f9a;this['isEnabledTime']()&&this[_0x2d22f8(_0x254f57._0x2c537a)];}},{'key':_0x552f9a(0x103),'value':function _0x308b55(){var _0x4c59fb=_0x552f9a;return this['canvasLayer'][_0x4c59fb(0xf0)][_0x4c59fb(0x103)](this[_0x4c59fb(_0x4895b0._0x4a6517)]);}},{'key':_0x552f9a(0x10f),'value':function _0x223e65(_0x2caf58){var _0x2c6880=_0x552f9a;this['options']=_0x2caf58,this[_0x2c6880(0x13a)](_0x2caf58),this['context']=this[_0x2c6880(0xe4)]['context']||'2d',this[_0x2c6880(0xe4)]['zIndex']&&this['canvasLayer']&&this[_0x2c6880(_0x4bdef6._0x2e09d6)]['setZIndex']&&this['canvasLayer']['setZIndex'](this['options']['zIndex']),this[_0x2c6880(0x119)]();}},{'key':'_canvasUpdate','value':function _0x3d6d5b(_0x4765e3){var _0x2ed0c8={_0x22b594:0xe3},_0x29df69=_0x552f9a,_0x1af989=this['scene'];if(this['canvasLayer']&&!this['stopAniamation']){var _0x40e5a2=this['options']['animation'],_0x533c16=this[_0x29df69(_0x363afe._0x5a7de7)]();if(this[_0x29df69(0x10b)]()){if(void 0x0===_0x4765e3)return void this['clear'](_0x533c16);this['context']==='2d'&&(_0x533c16[_0x29df69(_0x363afe._0x3a31cb)](),_0x533c16['globalCompositeOperation']='destination-out',_0x533c16['fillStyle']='rgba(0,\x200,\x200,\x20.1)',_0x533c16['fillRect'](0x0,0x0,_0x533c16['canvas']['width'],_0x533c16['canvas']['height']),_0x533c16[_0x29df69(0xef)]());}else this['clear'](_0x533c16);if(this['context']==='2d')for(var _0x38fb41 in this['options']){_0x533c16[_0x38fb41]=this[_0x29df69(_0x363afe._0x39359a)][_0x38fb41];}else _0x533c16['clear'](_0x533c16['COLOR_BUFFER_BIT']);var _0x12612b={'transferCoordinate':function _0x42fef9(_0xf19fdf){var _0xd62284=_0x29df69,_0x469722=null,_0x55322d=_0x1af989['mapvFixedHeight'];_0x1af989['mapvAutoHeight']&&(_0x55322d=_0x1af989['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0xf19fdf[0x0],_0xf19fdf[0x1])));var _0x39572f=Cesium$1[_0xd62284(0x133)]['fromDegrees'](_0xf19fdf[0x0],_0xf19fdf[0x1],_0x55322d);if(!_0x39572f)return _0x469722;var _0x1b1928=_0x1af989['cartesianToCanvasCoordinates'](_0x39572f);if(!_0x1b1928)return _0x469722;if(_0x1af989['mapvDepthTest']&&_0x1af989['mode']===Cesium$1[_0xd62284(0x11c)][_0xd62284(_0x2ed0c8._0x22b594)]){var _0x48fd0d=new Cesium$1[(_0xd62284(0x112))](_0x1af989['globe']['ellipsoid'],_0x1af989[_0xd62284(0x139)][_0xd62284(0xe0)]),_0x2582a8=_0x48fd0d[_0xd62284(0xdb)](_0x39572f);if(!_0x2582a8)return _0x469722;}return[_0x1b1928['x'],_0x1b1928['y']];}};void 0x0!==_0x4765e3&&(_0x12612b['filter']=function(_0x2441c3){var _0x1a69e9=_0x29df69,_0x18a741=_0x40e5a2['trails']||0xa;return!!(_0x4765e3&&_0x2441c3[_0x1a69e9(0xf2)]>_0x4765e3-_0x18a741&&_0x2441c3['time']<_0x4765e3);});var _0x6e2836=this['dataSet']['get'](_0x12612b);this['processData'](_0x6e2836),this[_0x29df69(0xe4)]['unit']==='m'&&this[_0x29df69(_0x363afe._0x39359a)]['size'],this['options'][_0x29df69(_0x363afe._0x204d7a)]=this['options']['size'];var _0x1dfca2=_0x1af989['cartesianToCanvasCoordinates'](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x1dfca2)return;this['drawContext'](_0x533c16,new mapv__namespace['DataSet'](_0x6e2836),this[_0x29df69(0xe4)],_0x1dfca2),this['options'][_0x29df69(_0x363afe._0x35e14d)]&&this['options'][_0x29df69(0x118)](_0x4765e3);}}},{'key':'updateData','value':function _0x501b9f(_0x5ad03e,_0x5a7906){var _0x1bda70=_0x552f9a,_0x2feb98=_0x5ad03e;_0x2feb98&&_0x2feb98['get']&&(_0x2feb98=_0x2feb98[_0x1bda70(_0x1e1efd._0x3f2c62)]()),void 0x0!==_0x2feb98&&this['dataSet'][_0x1bda70(0x124)](_0x2feb98),_get(_getPrototypeOf(_0x41f7c4[_0x1bda70(_0x1e1efd._0x2b086c)]),'update',this)['call'](this,{'options':_0x5a7906});}},{'key':'addData','value':function _0x18d43b(_0x400667,_0x235f13){var _0x596a28=_0x552f9a,_0x3e9dcd=_0x400667;_0x400667&&_0x400667['get']&&(_0x3e9dcd=_0x400667[_0x596a28(0x108)]()),this['dataSet'][_0x596a28(0xe8)](_0x3e9dcd),this['update']({'options':_0x235f13});}},{'key':'getData','value':function _0x12cf5d(){return this['dataSet'];}},{'key':'removeData','value':function _0x222dc5(_0x131495){var _0x4099b9=_0x552f9a;if(this['dataSet']){var _0x3506ed=this[_0x4099b9(0x132)]['get']({'filter':function _0x2036f6(_0x3a7f33){return _0x131495==null||typeof _0x131495!=='function'||!_0x131495(_0x3a7f33);}});this['dataSet']['set'](_0x3506ed),this['update']({'options':null});}}},{'key':'clearData','value':function _0x2b0355(){var _0x5d12ee=_0x552f9a;this['dataSet']&&this[_0x5d12ee(0x132)]['clear'](),this['update']({'options':null});}},{'key':'draw','value':function _0x3a751d(){this['canvasLayer']['draw']();}},{'key':'clear','value':function _0x401b34(_0x593c28){var _0x26e563=_0x552f9a;_0x593c28&&_0x593c28[_0x26e563(0xf4)]&&_0x593c28['clearRect'](0x0,0x0,_0x593c28['canvas']['width'],_0x593c28[_0x26e563(_0x1f69b6._0x17df81)][_0x26e563(_0x1f69b6._0xb2eda4)]);}},{'key':'destroy','value':function _0x1a6686(){var _0x2daadf=_0x552f9a;this[_0x2daadf(_0x238e7e._0x545399)](this['getContext']()),this[_0x2daadf(_0x238e7e._0x49a5c6)](),this['animator']&&this[_0x2daadf(0x120)][_0x2daadf(_0x238e7e._0x48b1fb)](),this[_0x2daadf(_0x238e7e._0x31812d)]=null,this['canvasLayer']=null;}}]),_0x41f7c4;}(BaseLayer$1);if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet'][_0x410271(0x10a)]['transferCoordinate']=function(_0x29b2bd,_0x204f59,_0x592110,_0x412eff){var _0x1f5ce4={_0x4323c4:0xf6,_0x599290:0x129},_0x37f11e=_0x410271;_0x412eff=_0x412eff||'_coordinates',_0x592110=_0x592110||'coordinates';for(var _0x3db7fd=0x0;_0x3db7fd<_0x29b2bd[_0x37f11e(_0x1f5ce4._0x4323c4)];_0x3db7fd++){var _0x37deef=_0x29b2bd[_0x3db7fd]['geometry'],_0x2ea417=_0x37deef[_0x592110];switch(_0x37deef[_0x37f11e(_0x1f5ce4._0x599290)]){case'Point':{var _0xd827a3=_0x204f59(_0x2ea417);_0xd827a3?_0x37deef[_0x412eff]=_0xd827a3:_0x37deef[_0x412eff]=[-0x3e7,-0x3e7];}break;case'LineString':{var _0x4ff5e6=[];for(var _0x138ede=0x0;_0x138ede<_0x2ea417[_0x37f11e(0xf6)];_0x138ede++){var _0x182a8d=_0x204f59(_0x2ea417[_0x138ede]);_0x182a8d&&_0x4ff5e6['push'](_0x182a8d);}_0x37deef[_0x412eff]=_0x4ff5e6;}break;case'MultiLineString':case _0x37f11e(0x12a):{var _0x27072a=_0x22e833(_0x2ea417);_0x37deef[_0x412eff]=_0x27072a;}break;case'MultiPolygon':{var _0x1660e7=[];for(var _0x5c6ca6=0x0;_0x5c6ca6<_0x2ea417[_0x37f11e(0xf6)];_0x5c6ca6++){var _0x1e862a=_0x22e833(_0x2ea417[_0x5c6ca6]);_0x1e862a['length']>0x0&&_0x1660e7['push'](_0x1e862a);}_0x37deef[_0x412eff]=_0x1660e7;}break;}}function _0x22e833(_0x334fe0){var _0x56c5fa=_0x37f11e,_0x4c6c03=[];for(var _0x5c6e12=0x0;_0x5c6e12<_0x334fe0[_0x56c5fa(0xf6)];_0x5c6e12++){var _0x2b3c83=_0x334fe0[_0x5c6e12],_0x86eb92=[];for(var _0x26519f=0x0;_0x26519f<_0x2b3c83['length'];_0x26519f++){var _0x14c784=_0x204f59(_0x2b3c83[_0x26519f]);_0x14c784&&_0x86eb92['push'](_0x14c784);}_0x86eb92['length']>0x0&&_0x4c6c03['push'](_0x86eb92);}return _0x4c6c03;}return _0x29b2bd;};else throw new Error('请引入\x20mapv\x20库\x20');var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'],divId=0x0,MapVLayer=function(_0x45033b){var _0x3a4607={_0x59af61:0x11b,_0x3726ac:0xe6,_0x3247db:0x11e},_0x13ca16={_0xf93793:0xd1,_0x1efd7e:0xe4},_0x194a40={_0x11510f:0xe4,_0x4a09ee:0x10e,_0x156d86:0xf5},_0x59b0e7={_0x29ae07:0x10c},_0x447f65={_0x2fd181:0xd7},_0x46f265={_0x199360:0xe7,_0x109e51:0xd9,_0x498858:0xd8,_0x33a206:0x102},_0x6e4155={_0xf7cf7:0xf0,_0x2ceaaa:0x116,_0x32987e:0xfc,_0xddc84c:0x12e,_0x3f39c2:0x116},_0x54c762={_0x31f485:0xd7},_0x3e70d0={_0x5e523d:0x13c,_0x56df60:0xff,_0xe51fa7:0xe4},_0x551a4a={_0x49fc0a:0xd7},_0x2359d8={_0x491387:0xd7},_0x1ec959={_0x5cf634:0x126},_0x233675={_0x552eda:0xf5,_0x2f16f5:0x126,_0x7566fa:0x117,_0x33ade4:0xf5},_0x29dd21={_0x11bfb6:0x13b,_0x55b702:0x12b,_0x24f854:0x134,_0x5349f2:0xe9,_0xbb5401:0xe9},_0x4e37ab={_0x288f8b:0xf5},_0x41982d={_0x5266ef:0x10d,_0x4d3280:0xd7},_0x41a842={_0x541c92:0xd8,_0x1618b2:0x132,_0x23e8b0:0xf0,_0x435ce7:0x11e},_0x3d2ce0={_0x556271:0xe4,_0x379b65:0x12c},_0x5885f7={_0x358610:0x116},_0x1db9b6={_0x5aba7e:0x132,_0x2879e1:0x11f},_0x19ad08=_0x410271;_inherits(_0x3faca0,_0x45033b);var _0x21a48c=_createSuper(_0x3faca0);function _0x3faca0(_0x2a5054,_0x4dc577){var _0x413aa3=_0x2a6f,_0x1695d0;return _classCallCheck(this,_0x3faca0),_0x1695d0=_0x21a48c['call'](this,_0x2a5054),_0x1695d0[_0x413aa3(0xec)]=_0x1695d0['options']['pointerEvents'],_0x1695d0[_0x413aa3(_0x1db9b6._0x5aba7e)]=_0x4dc577||new mapv__namespace['DataSet'](_0x2a5054[_0x413aa3(_0x1db9b6._0x2879e1)]),_0x1695d0['canvas']=null,_0x1695d0;}return _createClass(_0x3faca0,[{'key':'pointerEvents','get':function _0x3df201(){return this['_pointerEvents'];},'set':function _0x1107e4(_0x239772){this['_pointerEvents']=_0x239772,this['canvas']&&(_0x239772?this['canvas']['style']['pointerEvents']='all':this['canvas']['style']['pointerEvents']='none');}},{'key':'_showHook','value':function _0x299ada(_0x561073){var _0x373a8b=_0x2a6f;_0x561073?this['canvas'][_0x373a8b(_0x5885f7._0x358610)]['display']='block':this['canvas'][_0x373a8b(0x116)]['display']=_0x373a8b(0xd4);}},{'key':'_mountedHook','value':function _0x4f5d82(){var _0x181a08=_0x2a6f,_0x59ae8e,_0x2f1bb8,_0x30888c;this['_map']['scene']['mapvDepthTest']=(_0x59ae8e=this[_0x181a08(_0x3d2ce0._0x556271)]['depthTest'])!==null&&_0x59ae8e!==void 0x0?_0x59ae8e:!![],this['_map']['scene']['mapvAutoHeight']=(_0x2f1bb8=this['options']['clampToGround'])!==null&&_0x2f1bb8!==void 0x0?_0x2f1bb8:![],this['_map'][_0x181a08(_0x3d2ce0._0x379b65)][_0x181a08(0x114)]=(_0x30888c=this['options']['fixedHeight'])!==null&&_0x30888c!==void 0x0?_0x30888c:0x0;}},{'key':'_addedHook','value':function _0x554b37(){var _0x70a42f=_0x2a6f;this[_0x70a42f(0x132)]&&(!this['dataSet'][_0x70a42f(_0x41a842._0x541c92)]||this['dataSet']['_data']['length']===0x0)&&(this['dataSet']['_data']=[]['concat'](this[_0x70a42f(_0x41a842._0x1618b2)]['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this[_0x70a42f(0xf5)],this[_0x70a42f(0x132)],this[_0x70a42f(0xe4)],this),this['initDevicePixelRatio'](),this[_0x70a42f(_0x41a842._0x23e8b0)]=this['_createCanvas'](),this[_0x70a42f(_0x41a842._0x435ce7)]=this['render']['bind'](this),this['bindEvent'](),this[_0x70a42f(0x117)]();}},{'key':'_removedHook','value':function _0x20e2ad(){var _0x1bd270=_0x2a6f;this['unbindEvent'](),this[_0x1bd270(0xd7)]&&(this[_0x1bd270(0xd7)][_0x1bd270(_0x41982d._0x5266ef)](),this[_0x1bd270(_0x41982d._0x4d3280)]=null),this[_0x1bd270(0xf0)][_0x1bd270(0x107)][_0x1bd270(0x128)](this['canvas']);}},{'key':'initDevicePixelRatio','value':function _0x5376a2(){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}},{'key':'bindEvent','value':function _0x46d95b(){var _0x499142=_0x2a6f,_0x37d89b,_0x399b27,_0x3e804d,_0x57f8f7;this[_0x499142(_0x4e37ab._0x288f8b)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace[_0x499142(0xe9)]['cameraMoveStart'],this[_0x499142(0x134)],this),this['_map']['on'](mars3d__namespace['EventType']['cameraMoveEnd'],this['_onMoveEndEvent'],this),(_0x37d89b=this['options'])!==null&&_0x37d89b!==void 0x0&&(_0x399b27=_0x37d89b['methods'])!==null&&_0x399b27!==void 0x0&&_0x399b27['click']&&this[_0x499142(_0x4e37ab._0x288f8b)]['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x3e804d=this['options'])!==null&&_0x3e804d!==void 0x0&&(_0x57f8f7=_0x3e804d['methods'])!==null&&_0x57f8f7!==void 0x0&&_0x57f8f7['mousemove']&&this['_map']['on'](mars3d__namespace[_0x499142(0xe9)]['mouseMove'],this['_onMapMouseMove'],this);}},{'key':'unbindEvent','value':function _0x45ded9(){var _0x235b75=_0x2a6f,_0x5cfbd0,_0x395669,_0x480c49,_0x3e1477;this['_map'][_0x235b75(_0x29dd21._0x11bfb6)](mars3d__namespace[_0x235b75(0xe9)][_0x235b75(_0x29dd21._0x55b702)],this[_0x235b75(_0x29dd21._0x24f854)],this),this['_map']['off'](mars3d__namespace[_0x235b75(0xe9)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace[_0x235b75(_0x29dd21._0x5349f2)]['cameraMoveEnd'],this['_onMoveEndEvent'],this),this[_0x235b75(0xf5)]['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),(_0x5cfbd0=this['options'])!==null&&_0x5cfbd0!==void 0x0&&(_0x395669=_0x5cfbd0['methods'])!==null&&_0x395669!==void 0x0&&_0x395669['click']&&this['_map'][_0x235b75(0x13b)](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x480c49=this[_0x235b75(0xe4)])!==null&&_0x480c49!==void 0x0&&(_0x3e1477=_0x480c49['methods'])!==null&&_0x3e1477!==void 0x0&&_0x3e1477['mousemove']&&this['_map']['off'](mars3d__namespace[_0x235b75(_0x29dd21._0xbb5401)]['mouseMove'],this['_onMapMouseMove'],this);}},{'key':'_onMoveStartEvent','value':function _0x1b0552(){var _0x22845f=_0x2a6f;this['_mapVRenderer']&&(this[_0x22845f(0xd7)][_0x22845f(0x131)](),this[_0x22845f(_0x233675._0x552eda)]['off'](mars3d__namespace['EventType'][_0x22845f(_0x233675._0x2f16f5)],this[_0x22845f(_0x233675._0x7566fa)],this),this[_0x22845f(_0x233675._0x33ade4)]['on'](mars3d__namespace[_0x22845f(0xe9)][_0x22845f(0x126)],this['_reset'],this));}},{'key':'_onMoveEndEvent','value':function _0x325733(){var _0x1e34cc=_0x2a6f;this['_mapVRenderer']&&(this['_map']['off'](mars3d__namespace['EventType'][_0x1e34cc(_0x1ec959._0x5cf634)],this['_reset'],this),this[_0x1e34cc(0xd7)][_0x1e34cc(0xe1)](),this['_reset']());}},{'key':'_setOptionsHook','value':function _0x2520a5(_0x1643ee,_0x1e2ccc){var _0x43d28a=_0x2a6f;this['_removedHook'](),this[_0x43d28a(0x138)]();}},{'key':'addData','value':function _0x1e969c(_0x53b79a){var _0x2fae51=_0x2a6f;this[_0x2fae51(_0x2359d8._0x491387)]&&this[_0x2fae51(0xd7)]['addData'](_0x53b79a,this['options']);}},{'key':_0x19ad08(_0x3a4607._0x59af61),'value':function _0x5be644(_0x5f11db){var _0x52bbe2=_0x19ad08;this['_mapVRenderer']&&this['_mapVRenderer'][_0x52bbe2(0x11b)](_0x5f11db,this['options']);}},{'key':'getData','value':function _0x2b6eb0(){var _0x3345be=_0x19ad08;return this['_mapVRenderer']&&(this['dataSet']=this[_0x3345be(_0x551a4a._0x49fc0a)]['getData']()),this['dataSet'];}},{'key':'removeData','value':function _0x86c24c(_0x46a9e3){this['_mapVRenderer']&&this['_mapVRenderer']['removeData'](_0x46a9e3);}},{'key':'removeAllData','value':function _0xc2304d(){this['_mapVRenderer']&&this['_mapVRenderer']['clearData']();}},{'key':_0x19ad08(_0x3a4607._0x3726ac),'value':function _0x5979d8(){var _0xcc00d4=_0x19ad08,_0x15216d=mars3d__namespace['DomUtil']['create']('canvas','mars3d-mapv',this['_map']['container']);_0x15216d['id']=this[_0xcc00d4(0xe4)]['layerid']||'mapv'+divId++,_0x15216d['style']['position']='absolute',_0x15216d['style']['top']='0px',_0x15216d['style']['left']=_0xcc00d4(0x123),_0x15216d[_0xcc00d4(0x116)]['pointerEvents']=this['_pointerEvents']?_0xcc00d4(_0x3e70d0._0x5e523d):_0xcc00d4(0xd4),_0x15216d['style']['zIndex']=this['options'][_0xcc00d4(_0x3e70d0._0x56df60)]||0x64,_0x15216d['width']=parseInt(this[_0xcc00d4(0xf5)]['canvas']['width']),_0x15216d[_0xcc00d4(0x12e)]=parseInt(this[_0xcc00d4(0xf5)]['canvas']['height']),_0x15216d['style']['width']=this['_map']['canvas']['style'][_0xcc00d4(0x125)],_0x15216d['style']['height']=this['_map']['canvas']['style']['height'];if(this[_0xcc00d4(_0x3e70d0._0xe51fa7)][_0xcc00d4(0xfd)]==='2d'){var _0x294681=this['devicePixelRatio'];_0x15216d[_0xcc00d4(0x103)](this['options']['context'])['scale'](_0x294681,_0x294681);}return _0x15216d;}},{'key':'_reset','value':function _0x4b2e2c(){var _0x2d7261=_0x19ad08;this[_0x2d7261(0xd2)](),this['render']();}},{'key':'draw','value':function _0x46b7b4(){var _0x47af53=_0x19ad08;this[_0x47af53(0x117)]();}},{'key':'remove','value':function _0x320b34(){var _0x1cbf16=_0x19ad08;this[_0x1cbf16(0xd7)]&&(this[_0x1cbf16(_0x54c762._0x31f485)]['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}},{'key':_0x19ad08(_0x3a4607._0x3247db),'value':function _0x3c0ad9(){this['_mapVRenderer']['_canvasUpdate']();}},{'key':'resize','value':function _0x57c095(){var _0x4e6cfc=_0x19ad08;if(this['canvas']){var _0x3d0c71=this[_0x4e6cfc(_0x6e4155._0xf7cf7)];_0x3d0c71[_0x4e6cfc(0x116)]['position']='absolute',_0x3d0c71[_0x4e6cfc(_0x6e4155._0x2ceaaa)][_0x4e6cfc(_0x6e4155._0x32987e)]='0px',_0x3d0c71[_0x4e6cfc(0x116)]['left']='0px',_0x3d0c71['width']=parseInt(this['_map']['canvas'][_0x4e6cfc(0x125)]),_0x3d0c71[_0x4e6cfc(_0x6e4155._0xddc84c)]=parseInt(this['_map'][_0x4e6cfc(0xf0)]['height']),_0x3d0c71[_0x4e6cfc(_0x6e4155._0x3f39c2)][_0x4e6cfc(0x125)]=this['_map']['canvas'][_0x4e6cfc(0x116)]['width'],_0x3d0c71[_0x4e6cfc(0x116)]['height']=this[_0x4e6cfc(0xf5)]['canvas']['style'][_0x4e6cfc(0x12e)];}}},{'key':'getRectangle','value':function _0x6d6626(_0x4ff560){var _0x351a1d=_0x19ad08;if(!this['dataSet']||!this['dataSet']['_data'])return;var _0x4bfd3e=mars3d__namespace[_0x351a1d(_0x46f265._0x199360)]['getExtentByGeoJSON']({'type':_0x351a1d(_0x46f265._0x109e51),'features':this['dataSet'][_0x351a1d(_0x46f265._0x498858)]});if(!_0x4bfd3e)return;return _0x4ff560!==null&&_0x4ff560!==void 0x0&&_0x4ff560['isFormat']?_0x4bfd3e:Cesium[_0x351a1d(_0x46f265._0x33a206)]['fromDegrees'](_0x4bfd3e['xmin'],_0x4bfd3e['ymin'],_0x4bfd3e[_0x351a1d(0xf7)],_0x4bfd3e['ymax']);}},{'key':'_onMapClick','value':function _0x5e9226(_0x4d171b){var _0x3221cd=_0x19ad08;this[_0x3221cd(0xe5)]=_0x4d171b,this[_0x3221cd(_0x447f65._0x2fd181)]&&this['_mapVRenderer']['clickEvent'](_0x4d171b['windowPosition'],_0x4d171b);}},{'key':'_onMapMouseMove','value':function _0x230715(_0x4e7797){var _0x3bca0c=_0x19ad08;this['_cache_event']=_0x4e7797,this['_mapVRenderer']&&this[_0x3bca0c(0xd7)][_0x3bca0c(_0x59b0e7._0x29ae07)](_0x4e7797['windowPosition'],_0x4e7797);}},{'key':'on','value':function _0x2773a7(_0x4579da,_0x33ac83,_0x1f81de){var _0x56fc7c=_0x19ad08,_0x467f54=this;this[_0x56fc7c(_0x194a40._0x11510f)][_0x56fc7c(0xd1)]=this['options']['methods']||{};if(_0x4579da===mars3d__namespace['EventType'][_0x56fc7c(_0x194a40._0x4a09ee)])this[_0x56fc7c(_0x194a40._0x11510f)][_0x56fc7c(0xd1)]['click']=function(_0x53eba6){var _0x2b8af6=_0x56fc7c;_0x53eba6&&_0x33ac83['bind'](_0x1f81de)(_objectSpread2(_objectSpread2({},_0x467f54[_0x2b8af6(0xe5)]),{},{'layer':_0x467f54,'data':_0x53eba6}));},this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this);else _0x4579da===mars3d__namespace['EventType']['mouseMove']&&(this['options']['methods']['mousemove']=function(_0x1674d3){_0x1674d3&&_0x33ac83['bind'](_0x1f81de)(_objectSpread2(_objectSpread2({},_0x467f54['_cache_event']),{},{'layer':_0x467f54,'data':_0x1674d3}));},this[_0x56fc7c(_0x194a40._0x156d86)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this));return this;}},{'key':'off','value':function _0x2d021d(_0x4954e1,_0x4b0ac1){var _0x536e4c=_0x19ad08;if(_0x4954e1===_0x536e4c(0x10e)){var _0x5b4189;this['_map']['off'](_0x4954e1,this['_onMapClick'],this),(_0x5b4189=this[_0x536e4c(0xe4)][_0x536e4c(_0x13ca16._0xf93793)])!==null&&_0x5b4189!==void 0x0&&_0x5b4189[_0x536e4c(0xf8)]&&delete this[_0x536e4c(_0x13ca16._0x1efd7e)]['methods'][_0x536e4c(0x10e)];}else{if(_0x4954e1==='mouseMove'){var _0x277ee1;this['_map']['off'](_0x4954e1,this['_onMapMouseMove'],this),(_0x277ee1=this[_0x536e4c(0xe4)][_0x536e4c(0xd1)])!==null&&_0x277ee1!==void 0x0&&_0x277ee1['mousemove']&&delete this['options']['methods']['mousemove'];}}return this;}}]),_0x3faca0;}(BaseLayer);mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace['layer']['MapVLayer']=MapVLayer,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)[_0x410271(0xed)](function(_0x2f06d2){if(_0x2f06d2!=='default'&&!exports['hasOwnProperty'](_0x2f06d2))Object['defineProperty'](exports,_0x2f06d2,{'enumerable':!![],'get':function(){return mapv[_0x2f06d2];}});}),Object[_0x410271(0x105)](exports,'__esModule',{'value':!![]});function _0x2249(){var _0x25e890=['isPointVisible','push','7203ZSYLKm','_size','stopAniamation','positionWC','animatorMoveendEvent','stepsRange','SCENE3D','options','_cache_event','_createCanvas','Util','add','EventType','canvasLayer','call','_pointerEvents','forEach','setPrototypeOf','restore','canvas','initDevicePixelRatio','time','configurable','clearRect','_map','length','xmax','mousemove','stop','getOwnPropertyDescriptors','clearData','top','context','24TahOBe','zIndex','373910wgXSCp','__proto__','Rectangle','getContext','function','defineProperty','1060EHpzml','parentElement','get','8JvKnWT','prototype','isEnabledTime','mousemoveEvent','destroy','click','init','step','clear','EllipsoidalOccluder','animation','mapvFixedHeight','2595070TiJOKk','style','_reset','updateCallback','initAnimator','__esModule','updateData','SceneMode','object','render','data','animator','start','11660SYTBqo','0px','set','width','postRender','create','removeChild','type','Polygon','mouseDown','scene','addAnimatorEvent','height','645453lksVIj','1146292lOnmuR','animatorMovestartEvent','dataSet','Cartesian3','_onMoveStartEvent','keys','construct','valueOf','_addedHook','camera','initDataRange','off','auto','methods','resize','891LzDpik','none','936582DlGNqo','bind','_mapVRenderer','_data','FeatureCollection','save'];_0x2249=function(){return _0x25e890;};return _0x2249();}
}));
